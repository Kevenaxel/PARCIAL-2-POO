<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Mini Punto de Venta - Mejorado</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background-color: #f4f6f8;
    }

    header {
      background-color: #1e272e;
      color: white;
      text-align: center;
      padding: 30px;
    }

    nav {
      display: flex;
      justify-content: space-around;
      background-color: #2f3640;
      padding: 10px;
    }

    nav a {
      color: white;
      text-decoration: none;
      font-weight: bold;
    }

    nav a:hover {
      text-decoration: underline;
    }

    .section {
      display: none;
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }

    .active {
      display: block;
    }

    .formulario {
      background: white;
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    input, button {
      padding: 10px;
      margin: 8px 0;
      width: 100%;
      box-sizing: border-box;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    button {
      background-color: #44bd32;
      color: white;
      font-weight: bold;
      border: none;
      cursor: pointer;
    }

    button:hover {
      background-color: #218c2c;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    th, td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    th {
      background-color: #273c75;
      color: white;
    }

    .producto-menu {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }

    .producto {
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      padding: 15px;
      text-align: center;
    }

    .producto img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 10px;
    }

    .resumen {
      margin-top: 20px;
      font-weight: bold;
      font-size: 16px;
      text-align: right;
    }

    footer {
      text-align: center;
      background-color: #1e272e;
      color: white;
      padding: 15px;
      margin-top: 40px;
    }
  </style>
</head>
<body>

<header>
  <h1>📦 Mini Punto de Venta - Control de Inventario y Ganancias</h1>
</header>

<nav>
  <a href="#" onclick="mostrar('menu')">Menú Básico</a>
  <a href="#" onclick="mostrar('inventario')">Inventario</a>
  <a href="#" onclick="mostrar('ventas')">Ventas</a>
  <a href="#" onclick="mostrar('ganancias')">Ganancias</a>
  <a href="#" onclick="mostrar('dueno')">Dueño</a>
</nav>

<div class="section active" id="menu">
  <h2>🧾 Menú Básico de Productos</h2>
  <div class="producto-menu">
    <div class="producto">
      <img src="https://images.unsplash.com/photo-1603052875722-8fd97e46b031?auto=format&fit=crop&w=800&q=80" alt="Alitas">
      <h3>Caja de Alitas</h3>
      <p>Precio sugerido: $7.50</p>
    </div>
    <div class="producto">
      <img src="https://images.unsplash.com/photo-1589445915144-d2b53cbfa73b?auto=format&fit=crop&w=800&q=80" alt="Leche">
      <h3>Leche en Galón</h3>
      <p>Precio sugerido: $4.00</p>
    </div>
    <div class="producto">
      <img src="https://images.unsplash.com/photo-1603189324938-f3b72fda0a49?auto=format&fit=crop&w=800&q=80" alt="Arroz">
      <h3>Arroz</h3>
      <p>Precio sugerido: $1.20</p>
    </div>
    <div class="producto">
      <img src="https://images.unsplash.com/photo-1620899392302-b3c5b34a32ea?auto=format&fit=crop&w=800&q=80" alt="Aceite Mazola">
      <h3>Aceite Mazola</h3>
      <p>Precio sugerido: $3.50</p>
    </div>
    <div class="producto">
      <img src="https://images.unsplash.com/photo-1605296867304-46d5465a13f1?auto=format&fit=crop&w=800&q=80" alt="Azúcar">
      <h3>Azúcar</h3>
      <p>Precio sugerido: $1.10</p>
    </div>
  </div>
</div>

<div class="section" id="inventario">
  <h2>📦 Inventario</h2>
  <div class="formulario">
    <input type="text" id="nombreProducto" placeholder="Nombre del Producto">
    <input type="number" id="cantidadProducto" placeholder="Cantidad">
    <input type="number" id="precioCosto" placeholder="Precio de Costo">
    <input type="number" id="precioVenta" placeholder="Precio de Venta">
    <button onclick="agregarProducto()">Agregar Producto</button>
  </div>
  <table>
    <thead>
      <tr><th>#</th><th>Producto</th><th>Cantidad</th><th>Costo</th><th>Venta</th><th>Acciones</th></tr>
    </thead>
    <tbody id="tablaInventario"></tbody>
  </table>
  <div class="resumen" id="resumenInventario">Total Costo: $0.00 | Total Venta: $0.00</div>
</div>

<div class="section" id="ventas">
  <h2>💰 Registrar Venta</h2>
  <div class="formulario">
    <input type="text" id="emisor" placeholder="Nombre del Emisor">
    <input type="text" id="ventaNombre" placeholder="Producto Vendido">
    <input type="number" id="ventaCantidad" placeholder="Cantidad">
    <button onclick="registrarVenta()">Registrar Venta</button>
  </div>
  <table>
    <thead>
      <tr><th>#</th><th>Producto</th><th>Cantidad</th><th>Emisor</th><th>Total Venta</th><th>Ganancia</th></tr>
    </thead>
    <tbody id="tablaVentas"></tbody>
  </table>
</div>

<div class="section" id="ganancias">
  <h2>📈 Resumen de Ganancias</h2>
  <div class="resumen" id="resumenGanancias">Total Ventas: $0.00 | Total Ganancia: $0.00</div>
</div>

<div class="section" id="dueno">
  <h2>🔐 Registro del Dueño</h2>
  <div class="formulario">
    <input type="text" id="usuarioDueno" placeholder="Usuario">
    <input type="password" id="claveDueno" placeholder="Contraseña">
    <button onclick="registrarDueno()">Registrar Dueño</button>
  </div>
  <div id="infoDueno"></div>
</div>

<footer>
  &copy; 2025 MiniTienda - Sistema Web de Inventario y Ventas
</footer>

<script>
  let inventario = [];
  let ventas = [];
  let totalVentas = 0;
  let totalGanancia = 0;
  let dueno = {};

  function mostrar(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function registrarDueno() {
    const user = document.getElementById('usuarioDueno').value;
    const clave = document.getElementById('claveDueno').value;
    if (user && clave) {
      dueno.usuario = user;
      dueno.clave = clave;
      document.getElementById('infoDueno').innerHTML = `<p>Dueño registrado: <strong>${user}</strong></p>`;
    }
  }

  function agregarProducto() {
    const nombre = document.getElementById('nombreProducto').value;
    const cantidad = parseInt(document.getElementById('cantidadProducto').value);
    const costo = parseFloat(document.getElementById('precioCosto').value);
    const venta = parseFloat(document.getElementById('precioVenta').value);
    if (nombre && cantidad > 0 && costo >= 0 && venta >= costo) {
      inventario.push({ nombre, cantidad, costo, venta });
      actualizarInventario();
    }
  }

  function editarProducto(index) {
    const producto = inventario[index];
    document.getElementById('nombreProducto').value = producto.nombre;
    document.getElementById('cantidadProducto').value = producto.cantidad;
    document.getElementById('precioCosto').value = producto.costo;
    document.getElementById('precioVenta').value = producto.venta;
    inventario.splice(index, 1);
    actualizarInventario();
  }

  function actualizarInventario() {
    const tabla = document.getElementById('tablaInventario');
    tabla.innerHTML = '';
    let totalCosto = 0;
    let totalVenta = 0;
    inventario.forEach((item, index) => {
      totalCosto += item.cantidad * item.costo;
      totalVenta += item.cantidad * item.venta;
      tabla.innerHTML += `<tr>
        <td>${index + 1}</td>
        <td>${item.nombre}</td>
        <td>${item.cantidad}</td>
        <td>$${item.costo.toFixed(2)}</td>
        <td>$${item.venta.toFixed(2)}</td>
        <td><button onclick="editarProducto(${index})">Editar</button></td>
      </tr>`;
    });
    document.getElementById('resumenInventario').textContent = `Total Costo: $${totalCosto.toFixed(2)} | Total Venta: $${totalVenta.toFixed(2)}`;
  }

  function registrarVenta() {
    const emisor = document.getElementById('emisor').value;
    const nombre = document.getElementById('ventaNombre').value;
    const cantidad = parseInt(document.getElementById('ventaCantidad').value);
    const producto = inventario.find(p => p.nombre.toLowerCase() === nombre.toLowerCase());

    if (producto && cantidad > 0 && producto.cantidad >= cantidad) {
      const total = cantidad * producto.venta;
      const ganancia = cantidad * (producto.venta - producto.costo);
      ventas.push({ nombre, cantidad, total, ganancia, emisor });
      producto.cantidad -= cantidad;
      totalVentas += total;
      totalGanancia += ganancia;
      actualizarInventario();
      actualizarVentas();
      actualizarGanancias();
    }
  }

  function actualizarVentas() {
    const tabla = document.getElementById('tablaVentas');
    tabla.innerHTML = '';
    ventas.forEach((v, index) => {
      tabla.innerHTML += `<tr>
        <td>${index + 1}</td>
        <td>${v.nombre}</td>
        <td>${v.cantidad}</td>
        <td>${v.emisor}</td>
        <td>$${v.total.toFixed(2)}</td>
        <td>$${v.ganancia.toFixed(2)}</td>
      </tr>`;
    });
  }

  function actualizarGanancias() {
    document.getElementById('resumenGanancias').textContent =
      `Total Ventas: $${totalVentas.toFixed(2)} | Total Ganancia: $${totalGanancia.toFixed(2)}`;
  }
</script>

</body>
</html>
